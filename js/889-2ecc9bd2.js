"use strict";(globalThis["webpackChunksimple_assets_platform_template"]=globalThis["webpackChunksimple_assets_platform_template"]||[]).push([[889],{5889:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var l=function(){var e=this,t=e._self._c;return t("el-row",[t("el-card",{attrs:{id:"gallery-table"},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{attrs:{id:"title-col"}},[t("h1",[e._v("我的图库")])])]},proxy:!0}])},[t("el-table",{attrs:{stripe:!0,border:!0,data:e.tableData}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-col",{attrs:{id:"gallery-table-expand-col"}},[t("el-form",[t("el-form-item",{attrs:{label:"ID"}},[t("span",[e._v(e._s(a.row.id))])]),t("el-form-item",{attrs:{label:"拥有者"}},[t("span",[e._v(e._s(a.row.owner))])]),t("el-form-item",{attrs:{label:"公开展示"}},[t("span",{domProps:{innerHTML:e._s(a.row.isPublic?"是":"否")}})]),a.row.dateLimit?t("el-form-item",{attrs:{label:"时间限制"}},[t("span",{domProps:{innerHTML:e._s(new Date(1e3*a.row.dateLimit).toLocaleString())}})]):e._e(),a.row.timesLimit?t("el-form-item",{attrs:{label:"次数限制"}},[t("span",[e._v(e._s(a.row.timesLimit))])]):e._e()],1)],1)]}}])}),t("el-table-column",{attrs:{label:"预览",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("img",{attrs:{width:"100%",height:"auto",src:e.$api.getImgUrl(a.row.id),alt:""}})]}}])}),t("el-table-column",{attrs:{label:"资源ID","min-width":"200",prop:"id"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,"min-width":"200",label:"资源名",prop:"name"}}),t("el-table-column",{attrs:{"min-width":"200",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-input",{attrs:{size:"mini",placeholder:"搜索",clearable:""},on:{change:function(t){return e.updateTableData(e.pageNum)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"default",fn:function(a){return[t("div",{staticStyle:{display:"flex","justify-content":"space-evenly"}},[t("el-button",{attrs:{type:"info",round:""},on:{click:function(t){return e.goManage(a.row)}}},[e._v("管理 ")]),t("el-popover",{attrs:{placement:"top"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-button",{attrs:{round:"",type:"danger"}},[e._v("删除 ")])]},proxy:!0}],null,!0)},[t("p",[e._v("确定删除这个资源吗(操作不可逆)")]),t("div",{staticStyle:{display:"flex","justify-content":"center"}},[t("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{plain:"",type:"warning",size:"large"},on:{click:function(t){return e.deleteImg(a.row.id)}}},[e._v("确定 ")])],1)])],1)]}}])})],1),t("el-pagination",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"1vh","flex-wrap":"wrap-reverse"},attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":function(t){return e.updateTableData(e.pageNum)},"size-change":function(t){return e.updateTableData(e.pageNum)},"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)],1)},n=[];const r={name:"GalleryTable",data(){return{search:null,total:0,pageSize:10,pageNum:1,tableData:[]}},methods:{updateTableData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageNum;this.$api.getImgList(e,this.pageSize,!0,this.search?this.search:null).then((e=>{this.tableData=e.data.data.img,this.total=e.data.data.total}))},goManage(e){window.open(this.$router.resolve({name:"pic-info",params:{pic:e.id}}).href)},deleteImg(e){this.$api.delImg(e).then((()=>{this.$message.success("删除成功"),this.updateTableData()}))}},beforeMount(){this.updateTableData()}},i=r;var o=a(3026),s=(0,o.Z)(i,l,n,!1,null,null,null);const p=s.exports}}]);
//# sourceMappingURL=889-2ecc9bd2.js.map