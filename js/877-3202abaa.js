"use strict";(globalThis["webpackChunkelement"]=globalThis["webpackChunkelement"]||[]).push([[877],{9877:(i,t,e)=>{e.r(t),e.d(t,{default:()=>m});var s=function(){var i=this,t=i._self._c;return t("el-row",[this.info?t("el-card",{attrs:{id:"card"}},[t("el-col",{attrs:{md:11,xs:24,id:"image"}},[t("img",{staticStyle:{width:"100%",height:"100%","text-align":"center"},attrs:{src:this.$api.getImgUrl(i.pic),alt:"",loading:"lazy"}})]),t("el-col",{staticStyle:{"padding-bottom":"1vh"},attrs:{md:{span:12,push:1},xs:24,id:"info"}},[t("el-descriptions",{attrs:{title:`[已展示 ${this.times} 次]${i.info.name}`,column:1,border:"",direction:"vertical",size:"medium","label-style":{"text-align":"center"}}},i._l(this.templates,(function(e){return t("el-descriptions-item",{key:e[0],attrs:{label:e[0]}},[t("el-input",{attrs:{disabled:"",value:e[1],"data-clipboard-text":e[1]},nativeOn:{click:function(t){return i.copyCode(t)}}})],1)})),1)],1),this.user&&this.info&&this.info.owner===this.user.id?t("el-col",{attrs:{id:"settings",xs:18,md:18}},[t("el-checkbox",{ref:"isPublic",on:{change:function(t){return i.edit({isPublic:t})}},model:{value:i.isPublic,callback:function(t){i.isPublic=t},expression:"isPublic"}},[i._v("公共可见 ")]),t("el-date-picker",{ref:"datetime",attrs:{type:"datetime",placeholder:"限时[可选]","time-arrow-control":!0},on:{change:function(t){i.edit({dateLimit:t?t.getTime():0})}},model:{value:i.dateLimit,callback:function(t){i.dateLimit=t},expression:"dateLimit"}}),t("el-input",{ref:"timesLimit",attrs:{placeholder:"限次[可选]",max:"10000",type:"number",id:"upload-setting-times-limit"},on:{change:function(t){return i.edit({timesLimit:t||0})}},model:{value:i.timesLimit,callback:function(t){i.timesLimit=t},expression:"timesLimit"}},[t("template",{slot:"append"},[i._v("次")])],2)],1):i._e()],1):i._e()],1)},a=[],n=e(6294);const o={props:["pic"],name:"PicInfo",computed:{...(0,n.mapGetters)(["user"])},data:()=>({info:void 0,times:void 0,templates:[],isPublic:void 0,dateLimit:void 0,timesLimit:void 0}),watch:{pic(){this.updateImgInfo()}},methods:{copyCode(i){const t=i.currentTarget.children[0];this.$copyText(t.value).then((()=>{this.$message({message:"复制成功",type:"success"})}),(()=>{this.$message({message:"复制失败",type:"error"})}))},updateImgInfo(){this.$api.getImgInfo(this.pic).then((i=>{if(-1===i.data.code)return this.$message.error("图片不存在或状态异常"),void this.$emit("back");this.info=i.data.data.info,this.times=i.data.data.times,this.isPublic=this.info.isPublic,this.dateLimit=this.info.dateLimit?new Date(1e3*this.info.dateLimit):null,this.timesLimit=this.info.timesLimit?this.info.timesLimit:null;const t=`${window.origin}/pic-info/${this.pic}`,e=`${window.origin}${this.$api.getImgUrl(this.pic)}`;this.templates=[["Markdown",`[![${this.info.name}](${e})](${t})]`],["BBCODE",`[url=${t}/pic-info][img]${e}[/img][/url]`],["HTML",`<a href="${t}/pic-info" target="_blank"><img alt='' src="${e}" ></a>`],["展示页",t],["直链",e]]}))},edit(i){this.$api.editImgInfo(this.pic,i).then((i=>{0===i.data.code?this.$message.success("修改成功"):this.$message.error("修改失败")}))}},beforeMount(){this.updateImgInfo()}},l=o;var c=e(3026),r=(0,c.Z)(l,s,a,!1,null,"41a2ee20",null);const m=r.exports}}]);
//# sourceMappingURL=877-3202abaa.js.map